(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64e4ce07"],{1071:function(t,a,e){},"1ad1":function(t,a,e){},"2f15":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"background"},[e("div",{staticClass:"backgroundBox"}),e("div",{staticClass:"content"},[t._t("default")],2)])},i=[],o=(e("edbc"),{name:"Background"}),n=o,r=(e("6ae3"),e("5d22")),c=Object(r["a"])(n,s,i,!1,null,"b1a0d02a",null);a["a"]=c.exports},"3bae":function(t,a,e){var s=e("f14a"),i=e("8c0f"),o=e("d0fa"),n=e("28e6");for(var r in i){var c=s[r],d=c&&c.prototype;if(d&&d.forEach!==o)try{n(d,"forEach",o)}catch(u){d.forEach=o}}},"5cee":function(t,a,e){"use strict";e("ce2f")},"5d14":function(t,a,e){},6438:function(t,a,e){},6922:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"accountOrder"},[e("div",{staticClass:"myOrder"},[e("van-nav-bar",{attrs:{title:"我的订单","left-text":"返回","left-arrow":""},on:{"click-left":t.clickBack}})],1),e("Background",[e("van-tabs",{attrs:{swipeable:"","line-height":2,color:"#ecce96","title-active-color":"#C7A76D","title-inactive-color":"#666"},on:{change:t.changeOrderStatus},model:{value:t.activeTabIndex,callback:function(a){t.activeTabIndex=a},expression:"activeTabIndex"}},t._l(t.tabs,(function(a,s){return e("van-tab",{key:s,attrs:{title:a.title}},[e("div",{staticClass:"tab-content"},[t.buyIntemDatas.length>0?e("div",t._l(t.buyIntemDatas,(function(a,s){return e("div",{key:s,staticClass:"tab-box"},[e("PayBox",{attrs:{"pro-info":a.proInfo},scopedSlots:t._u([{key:"pay-title",fn:function(){return[e("div",{staticClass:"pay-title-box"},[e("div",{staticClass:"pay-t"},[t._v(t._s(a.oid))]),2===a.status?e("div",{staticClass:"pay-s"},[e("div",{staticClass:"pay-text"},[t._v("已完成")]),e("div",{staticClass:"pay-icon",on:{click:function(e){return t.removeOrder(a.oid,s)}}},[e("van-icon",{attrs:{name:"delete-o"}})],1)]):t._e(),1===a.status?e("div",{staticClass:"pay-s"},[e("div",{staticClass:"pay-text",on:{click:function(e){return t.confirmOrder(a,s)}}},[t._v(" 确认订单 ")])]):t._e()])]},proxy:!0},{key:"order-item",fn:function(){return t._l(a.data,(function(t,a){return e("OrderItem",{key:a,attrs:{product:t}})}))},proxy:!0}],null,!0)})],1)})),0):e("div",[e("van-empty",{attrs:{description:"没有该状态的订单"}})],1)])])})),1)],1)],1)},i=[],o=(e("3bae"),e("bf2f"),e("dff7"),e("2f15")),n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"pay-boxing"},[e("div",[t._t("pay-title",[e("div",{staticClass:"pay-title"},[t._v("订单信息")])])],2),e("div",{staticClass:"pad-middle"},[t._t("order-item")],2),e("div",{staticClass:"pay-foot"},[t._m(0),e("div",{staticClass:"foot-info"},[t.proInfo.date?e("div",{staticClass:"date"},[t._v(t._s(t._f("formatDate")(t.proInfo.date,"yyyy-MM-dd hh:mm:ss")))]):t._e(),e("div",{staticClass:"foot-bottom"},[e("div",{staticClass:"foot-count"},[t._v("共计 "+t._s(t.proInfo.count)+" 件")]),e("div",{staticClass:"foot-total"},[t._v("合计 ¥"+t._s(t.proInfo.total))])])])])])},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"pay-line"},[e("div",{staticClass:"pay-left"}),e("div",{staticClass:"pay-right"})])}],c=(e("6438"),{name:"payBox",props:{proInfo:{type:Object,default:function(){return{count:0,total:0,date:""}}}}}),d=c,u=(e("b4d9"),e("5d22")),l=Object(u["a"])(d,n,r,!1,null,"34f98517",null),f=l.exports,p=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"order-item"},[e("div",{staticClass:"pro-img"},[e("img",{staticClass:"auto-img",attrs:{src:t.product.small_img,alt:""}})]),e("div",{staticClass:"pro-info"},[e("div",{staticClass:"pro-top"},[e("div",{staticClass:"pro-name"},[e("div",{staticClass:"p-name"},[t._v(t._s(t.product.name))]),e("div",{staticClass:"p-rule"},[t._v(t._s(t.product.rule))])]),e("div",{staticClass:"p-enname"},[t._v(t._s(t.product.enname))])]),e("div",{staticClass:"pro-bottom"},[e("div",{staticClass:"p-price"},[t._v("¥"+t._s(t.product.price))]),e("div",{staticClass:"p-count"},[t._v("x"+t._s(t.product.count))])])])])},v=[],m=(e("e1e1"),{name:"OrderItem",props:{product:{type:Object,default:function(){return{}}}}}),h=m,g=(e("6c44"),Object(u["a"])(h,p,v,!1,null,"7029c063",null)),b=g.exports,y={name:"AccountOrder",data:function(){return{activeTabIndex:0,tabs:[{title:"全部",status:0},{title:"进行中",status:1},{title:"已完成",status:2}],buyIntemDatas:[]}},components:{Background:o["a"],PayBox:f,OrderItem:b},created:function(){this.getbuyIntemDatas(0)},methods:{clickBack:function(){this.$router.go(-1)},changeOrderStatus:function(t,a){this.getbuyIntemDatas(t)},getbuyIntemDatas:function(t){var a=this,e=this.$cookies.get("loginReturnToken");if(!e)return this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:this.$axios.defaults.baseURL+"/findOrder",params:{appkey:this.appkey,tokenString:e,status:t}}).then((function(t){if(a.$toast.clear(),700==t.data.code)return a.$toast({message:t.data.msg,forbidClick:!0,duration:3e3}),a.$router.push({name:"Login"});if(7e4===t.data.code){var e=[],s=[];t.data.result.forEach((function(t){if(t.small_img=t.smallImg,-1===s.indexOf(t.oid)){var a={oid:t.oid,status:t.status,proInfo:{date:t.updatedAt,count:0,total:0},data:[]};s.push(t.oid),e.push(a)}})),e.forEach((function(a){t.data.result.forEach((function(t){a.oid===t.oid&&(a.data.push(t),a.proInfo.count+=t.count,a.proInfo.total+=t.count*t.price)}))})),a.buyIntemDatas=e}else a.$toast({message:t.data.msg,forbidClick:!0,duration:3e3})})).catch((function(t){a.$toast.clear(),console.log("err ==> ",t)}))},confirmOrder:function(t,a){var e=this,s=this.$cookies.get("loginReturnToken");if(!s)return this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:this.$axios.defaults.baseURL+"/receive",data:{appkey:this.appkey,tokenString:s,oid:t.oid}}).then((function(s){if(e.$toast.clear(),700==s.data.code)return e.$toast({message:s.data.msg,forbidClick:!0,duration:3e3}),e.$router.push({name:"Login"});8e4===s.data.code&&(t.status=2,1===e.activeTabIndex&&e.buyIntemDatas.splice(a,1)),e.$toast({message:s.data.msg,forbidClick:!0,duration:3e3})})).catch((function(t){e.$toast.clear(),console.log("err ==> ",t)}))},removeOrder:function(t,a){var e=this,s=this.$cookies.get("loginReturnToken");if(!s)return console.log("浏览器token不存在"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:this.$axios.defaults.baseURL+"/removeOrder",data:{appkey:this.appkey,tokenString:s,oid:t}}).then((function(t){if(e.$toast.clear(),700==t.data.code)return e.$toast({message:t.data.msg,forbidClick:!0,duration:3e3}),e.$router.push({name:"Login"});9e4===t.data.code&&e.buyIntemDatas.splice(a,1),e.$toast({message:t.data.msg,forbidClick:!0,duration:3e3})})).catch((function(t){e.$toast.clear(),console.log("err ==> ",t)}))}}},C=y,k=(e("5cee"),Object(u["a"])(C,s,i,!1,null,"1a9bf52b",null));a["default"]=k.exports},"6ae3":function(t,a,e){"use strict";e("1071")},"6c44":function(t,a,e){"use strict";e("5d14")},b4d9:function(t,a,e){"use strict";e("1ad1")},bf2f:function(t,a,e){"use strict";var s=e("1f04"),i=e("5156"),o=e("e6d2"),n=e("a187"),r=e("f8d3"),c=e("6827"),d=e("98a5"),u=e("7041"),l=u("splice"),f=Math.max,p=Math.min,v=9007199254740991,m="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!l},{splice:function(t,a){var e,s,u,l,h,g,b=r(this),y=n(b.length),C=i(t,y),k=arguments.length;if(0===k?e=s=0:1===k?(e=0,s=y-C):(e=k-2,s=p(f(o(a),0),y-C)),y+e-s>v)throw TypeError(m);for(u=c(b,s),l=0;l<s;l++)h=C+l,h in b&&d(u,l,b[h]);if(u.length=s,e<s){for(l=C;l<y-s;l++)h=l+s,g=l+e,h in b?b[g]=b[h]:delete b[g];for(l=y;l>y-s+e;l--)delete b[l-1]}else if(e>s)for(l=y-s;l>C;l--)h=l+s-1,g=l+e-1,h in b?b[g]=b[h]:delete b[g];for(l=0;l<e;l++)b[l+C]=arguments[l+2];return b.length=y-s+e,u}})},ce2f:function(t,a,e){},d0fa:function(t,a,e){"use strict";var s=e("59bf").forEach,i=e("d714"),o=i("forEach");t.exports=o?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},d714:function(t,a,e){"use strict";var s=e("7ce6");t.exports=function(t,a){var e=[][t];return!!e&&s((function(){e.call(null,a||function(){throw 1},1)}))}},dff7:function(t,a,e){},e1e1:function(t,a,e){},edbc:function(t,a,e){}}]);
//# sourceMappingURL=chunk-64e4ce07.1e7a9587.js.map